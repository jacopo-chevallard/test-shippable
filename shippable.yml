language: none


integrations:                              
    hub:
      - integrationName: Docker-jc
        type: docker                        

branches:
  only:
    - master

compiler:
  - gcc

# environment variable
env:
  - CMAKE_MACROS=$HOME/cmake-macros

build:

  pre_ci_boot:
    image_name: jacopochevallard/beaglebaseimage
    image_tag: "1.3"
    pull: true                              #required, false if image already built or pulled in pre_ci
    #options:
    #env:

  pre_ci:
    - rm -rf cmake-macros
    - git clone https://github.com/jacopo-chevallard/cmake-macros.git
    - echo $CMAKE_MACROS

  ci:
    - mkdir -p build
    - cd build
    - echo $CMAKE_MACROS
    - ls $CMAKE_MACROS
    - cmake -DCMAKE_Fortran_COMPILER=/usr/bin/gfortran ..
    - make
    - ./hello_world

  post_ci:
    - echo "true"
